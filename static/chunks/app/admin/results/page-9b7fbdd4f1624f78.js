(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{9075:function(e,t,s){Promise.resolve().then(s.bind(s,4823))},4823:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var i=s(7437),l=s(2265),a=s(7648);let r=e=>{let{score:t,totalScore:s}=e,l=t/s*100,a="bg-red-100 text-red-800";return l>=80?a="bg-green-100 text-green-800":l>=60?a="bg-blue-100 text-blue-800":l>=40&&(a="bg-yellow-100 text-yellow-800"),(0,i.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(a),children:[t,"/",s," (",l.toFixed(0),"%)"]})};function n(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[m,o]=(0,l.useState)(""),[u,x]=(0,l.useState)("all"),[h,p]=(0,l.useState)("all"),[g,f]=(0,l.useState)([]),[y,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{setTimeout(()=>{let e=[{id:"1",quiz_id:"1",quiz_title:"Kiểm tra giữa kỳ Đại số",user_id:"4",user_name:"Phạm Học Sinh",user_email:"student1@example.com",score:85,total_score:100,time_spent:1800,submitted_at:"2023-05-10T10:30:00Z",attempt:1},{id:"2",quiz_id:"1",quiz_title:"Kiểm tra giữa kỳ Đại số",user_id:"5",user_name:"Ho\xe0ng Học Sinh",user_email:"student2@example.com",score:75,total_score:100,time_spent:2100,submitted_at:"2023-05-10T10:35:00Z",attempt:1},{id:"3",quiz_id:"2",quiz_title:"Kiểm tra cuối kỳ H\xecnh học",user_id:"4",user_name:"Phạm Học Sinh",user_email:"student1@example.com",score:90,total_score:100,time_spent:2400,submitted_at:"2023-06-15T09:40:00Z",attempt:1},{id:"4",quiz_id:"2",quiz_title:"Kiểm tra cuối kỳ H\xecnh học",user_id:"5",user_name:"Ho\xe0ng Học Sinh",user_email:"student2@example.com",score:65,total_score:100,time_spent:2700,submitted_at:"2023-06-15T09:45:00Z",attempt:1},{id:"5",quiz_id:"3",quiz_title:"B\xe0i tập Giải t\xedch",user_id:"6",user_name:"Đỗ Học Sinh",user_email:"student3@example.com",score:40,total_score:100,time_spent:1500,submitted_at:"2023-07-20T14:25:00Z",attempt:1},{id:"6",quiz_id:"3",quiz_title:"B\xe0i tập Giải t\xedch",user_id:"6",user_name:"Đỗ Học Sinh",user_email:"student3@example.com",score:70,total_score:100,time_spent:1800,submitted_at:"2023-07-21T10:30:00Z",attempt:2}];t(e),n(e),d(!1)},1e3)},[]),(0,l.useEffect)(()=>{let t=[...e];if(m){let e=m.toLowerCase();t=t.filter(t=>t.user_name.toLowerCase().includes(e)||t.user_email.toLowerCase().includes(e)||t.quiz_title.toLowerCase().includes(e))}if("all"!==u&&(t=t.filter(e=>e.quiz_id===u)),"all"!==h){let e=new Date,s=new Date(e.setHours(0,0,0,0)),i=new Date(e);i.setDate(e.getDate()-e.getDay()),i.setHours(0,0,0,0);let l=new Date(e.getFullYear(),e.getMonth(),1);t=t.filter(e=>{let t=new Date(e.submitted_at);return"today"===h?t>=s:"week"===h?t>=i:"month"!==h||t>=l})}n(t)},[e,m,u,h]);let j=e=>{g.includes(e)?f(g.filter(t=>t!==e)):f([...g,e])},N=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),_=e=>{let t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},v=Array.from(new Set(e.map(e=>e.quiz_id))).map(t=>{let s=e.find(e=>e.quiz_id===t);return{id:t,title:s?s.quiz_title:""}});return(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kết quả thi"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Xem v\xe0 quản l\xfd kết quả b\xe0i thi của học sinh"})]}),(0,i.jsxs)("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,i.jsxs)("div",{className:"col-span-2",children:[(0,i.jsx)("label",{htmlFor:"search",className:"sr-only",children:"T\xecm kiếm"}),(0,i.jsx)("input",{type:"text",id:"search",placeholder:"T\xecm kiếm theo t\xean học sinh, email hoặc t\xean b\xe0i thi...",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-blue-500",value:m,onChange:e=>o(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"quiz-filter",className:"sr-only",children:"Lọc theo b\xe0i thi"}),(0,i.jsxs)("select",{id:"quiz-filter",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-blue-500",value:u,onChange:e=>x(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Tất cả b\xe0i thi"}),v.map(e=>(0,i.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"date-filter",className:"sr-only",children:"Lọc theo thời gian"}),(0,i.jsxs)("select",{id:"date-filter",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-blue-500",value:h,onChange:e=>p(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Tất cả thời gian"}),(0,i.jsx)("option",{value:"today",children:"H\xf4m nay"}),(0,i.jsx)("option",{value:"week",children:"Tuần n\xe0y"}),(0,i.jsx)("option",{value:"month",children:"Th\xe1ng n\xe0y"})]})]})]}),(0,i.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("span",{className:"text-sm text-gray-500",children:[s.length," kết quả"]})}),(0,i.jsx)("div",{children:g.length>0&&(0,i.jsxs)("button",{type:"button",className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:()=>b(!0),children:["X\xf3a (",g.length,")"]})})]}),(0,i.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 shadow",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"w-12 px-6 py-3 text-left",children:(0,i.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:g.length===s.length&&s.length>0,onChange:()=>{g.length===s.length?f([]):f(s.map(e=>e.id))}})}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Học sinh"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"B\xe0i thi"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Điểm số"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Thời gian l\xe0m"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Ng\xe0y nộp"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Lần thứ"}),(0,i.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,i.jsx)("span",{className:"sr-only",children:"Thao t\xe1c"})})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:c?(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{colSpan:8,className:"px-6 py-4 text-center text-sm text-gray-500",children:[(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-500"})}),(0,i.jsx)("p",{className:"mt-2",children:"Đang tải dữ liệu..."})]})}):0===s.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Kh\xf4ng t\xecm thấy kết quả n\xe0o"})}):s.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:g.includes(e.id),onChange:()=>j(e.id)})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-gray-200 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-gray-600 font-medium",children:e.user_name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2)})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.user_name}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.user_email})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.quiz_title}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)(r,{score:e.score,totalScore:e.total_score})}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:N(e.time_spent)}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:_(e.submitted_at)}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.attempt}),(0,i.jsx)("td",{className:"px-6 py-4 text-right text-sm font-medium",children:(0,i.jsx)(a.default,{href:"/admin/results/".concat(e.id),className:"text-blue-600 hover:text-blue-900",children:"Chi tiết"})})]},e.id))})]})}),y&&(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,i.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,i.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,i.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:"​"}),(0,i.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle",children:[(0,i.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,i.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,i.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,i.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,i.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,i.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"X\xf3a kết quả thi"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsxs)("p",{className:"text-sm text-gray-500",children:["Bạn c\xf3 chắc chắn muốn x\xf3a ",g.length," kết quả thi đ\xe3 chọn? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c."]})})]})]})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,i.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>{t(e.filter(e=>!g.includes(e.id))),f([]),b(!1)},children:"X\xf3a"}),(0,i.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:mt-0 sm:w-auto sm:text-sm",onClick:()=>b(!1),children:"Hủy"})]})]})]})})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9075)}),_N_E=e.O()}]);