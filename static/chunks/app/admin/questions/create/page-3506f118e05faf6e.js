(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{1646:function(e,t,s){Promise.resolve().then(s.bind(s,348))},348:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var n=s(7437),l=s(2265),c=s(9376),a=s(7648);let i=["Đại số","Giải t\xedch","H\xecnh học","Số học","X\xe1c suất thống k\xea"];function r(){let e=(0,c.useRouter)(),[t,s]=(0,l.useState)({content:"",type:"multiple_choice",options:[{id:"a",text:""},{id:"b",text:""},{id:"c",text:""},{id:"d",text:""}],answer:"",category:"",difficulty:"medium",tags:[]}),[r,d]=(0,l.useState)(""),[o,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[h,g]=(0,l.useState)({}),b=e=>{s({...t,type:e})},f=e=>{s({...t,content:e}),v("content",e)},p=(e,n)=>{let l=[...t.options];l[e].text=n,s({...t,options:l}),"multiple_choice"===t.type&&w(l)},y=e=>{s({...t,answer:e}),v("answer",e)},j=()=>{r.trim()&&!t.tags.includes(r.trim())&&(s({...t,tags:[...t.tags,r.trim()]}),d(""))},N=e=>{s({...t,tags:t.tags.filter(t=>t!==e)})},v=(e,s)=>{let n={...h};switch(e){case"content":s.trim()?delete n.content:n.content="Nội dung c\xe2u hỏi kh\xf4ng được để trống";break;case"answer":"multiple_choice"!==t.type||s?delete n.answer:n.answer="Vui l\xf2ng chọn đ\xe1p \xe1n đ\xfang";break;case"category":s?delete n.category:n.category="Vui l\xf2ng chọn danh mục"}return g(n),0===Object.keys(n).length},w=e=>{let s={...h};"multiple_choice"===t.type&&e.filter(e=>!e.text.trim()).length>0?s.options="Tất cả c\xe1c t\xf9y chọn phải được điền đầy đủ":delete s.options,g(s)},k=()=>{let e={};return t.content.trim()||(e.content="Nội dung c\xe2u hỏi kh\xf4ng được để trống"),"multiple_choice"!==t.type||(t.options.filter(e=>!e.text.trim()).length>0&&(e.options="Tất cả c\xe1c t\xf9y chọn phải được điền đầy đủ"),t.answer||(e.answer="Vui l\xf2ng chọn đ\xe1p \xe1n đ\xfang")),t.category||(e.category="Vui l\xf2ng chọn danh mục"),g(e),0===Object.keys(e).length},C=async t=>{if(t.preventDefault(),k()){x(!0);try{await new Promise(e=>setTimeout(e,1e3)),e.push("/admin/questions")}catch(e){console.error("Lỗi khi tạo c\xe2u hỏi:",e)}finally{x(!1)}}};return(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Tạo c\xe2u hỏi mới"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Th\xeam c\xe2u hỏi mới v\xe0o ng\xe2n h\xe0ng c\xe2u hỏi"})]}),(0,n.jsxs)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:[(0,n.jsx)(a.default,{href:"/admin/questions",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Quay lại"}),(0,n.jsx)("button",{type:"button",className:"ml-3 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>m(!o),children:o?"Chỉnh sửa":"Xem trước"})]})]}),o?(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Xem trước c\xe2u hỏi"}),(0,n.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("multiple_choice"===t.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"multiple_choice"===t.type?"Trắc nghiệm":"Tự luận"}),t.category&&(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:t.category}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("easy"===t.difficulty?"bg-green-100 text-green-800":"medium"===t.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"easy"===t.difficulty?"Dễ":"medium"===t.difficulty?"Trung b\xecnh":"Kh\xf3"})]})]}),(0,n.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 mb-6",children:[(0,n.jsx)("div",{className:"prose max-w-none",children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:t.content.replace(/\$(.*?)\$/g,"\\($1\\)")}})}),"multiple_choice"===t.type&&(0,n.jsx)("div",{className:"mt-4 space-y-2",children:t.options.map(e=>(0,n.jsxs)("div",{className:"flex items-start p-2 rounded-md ".concat(t.answer===e.id?"bg-green-50 border border-green-200":""),children:[(0,n.jsx)("div",{className:"flex items-center h-5",children:(0,n.jsx)("input",{type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",checked:t.answer===e.id,readOnly:!0})}),(0,n.jsx)("div",{className:"ml-3 text-sm",children:(0,n.jsxs)("label",{className:"font-medium ".concat(t.answer===e.id?"text-green-700":"text-gray-700"),children:[e.id.toUpperCase(),". ",(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text.replace(/\$(.*?)\$/g,"\\($1\\)")}})]})})]},e.id))})]}),t.tags.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e))})]}),(0,n.jsxs)("div",{className:"flex justify-end mt-6",children:[(0,n.jsx)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>m(!1),children:"Quay lại chỉnh sửa"}),(0,n.jsx)("button",{type:"button",className:"ml-3 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:C,disabled:u||!k(),children:u?"Đang lưu...":"Lưu c\xe2u hỏi"})]})]}):(0,n.jsxs)("form",{onSubmit:C,className:"bg-white shadow-md rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loại c\xe2u hỏi"}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"multiple_choice",name:"question_type",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",checked:"multiple_choice"===t.type,onChange:()=>b("multiple_choice")}),(0,n.jsx)("label",{htmlFor:"multiple_choice",className:"ml-2 block text-sm text-gray-700",children:"Trắc nghiệm"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"essay",name:"question_type",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",checked:"essay"===t.type,onChange:()=>b("essay")}),(0,n.jsx)("label",{htmlFor:"essay",className:"ml-2 block text-sm text-gray-700",children:"Tự luận"})]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Nội dung c\xe2u hỏi ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("textarea",{id:"content",rows:5,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md ".concat(h.content?"border-red-500":""),placeholder:"Nhập nội dung c\xe2u hỏi (hỗ trợ LaTeX với c\xfa ph\xe1p $...$ cho inline v\xe0 $$...$$)",value:t.content,onChange:e=>f(e.target.value)}),h.content&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.content})]}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Sử dụng $...$ cho c\xf4ng thức to\xe1n học inline, v\xed dụ: $x^2 + y^2 = z^2$"})]}),"multiple_choice"===t.type&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T\xf9y chọn trả lời ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("div",{className:"space-y-3",children:t.options.map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex items-center h-5",children:(0,n.jsx)("input",{id:"answer-".concat(e.id),name:"answer",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",checked:t.answer===e.id,onChange:()=>y(e.id)})}),(0,n.jsx)("div",{className:"ml-3 flex-grow",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("label",{htmlFor:"answer-".concat(e.id),className:"block text-sm font-medium text-gray-700 mr-2",children:[e.id.toUpperCase(),"."]}),(0,n.jsx)("input",{type:"text",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md ".concat(h.options?"border-red-500":""),placeholder:"Nhập t\xf9y chọn ".concat(e.id.toUpperCase()),value:e.text,onChange:e=>p(s,e.target.value)})]})})]},e.id))}),h.options&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.options}),h.answer&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.answer}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Chọn đ\xe1p \xe1n đ\xfang bằng c\xe1ch nhấp v\xe0o n\xfat radio b\xean tr\xe1i mỗi t\xf9y chọn."})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:["Danh mục ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("select",{id:"category",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md ".concat(h.category?"border-red-500":""),value:t.category,onChange:e=>{s({...t,category:e.target.value}),v("category",e.target.value)},children:[(0,n.jsx)("option",{value:"",children:"Chọn danh mục"}),i.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),h.category&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.category})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Độ kh\xf3"}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"easy",name:"difficulty",type:"radio",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300",checked:"easy"===t.difficulty,onChange:()=>s({...t,difficulty:"easy"})}),(0,n.jsx)("label",{htmlFor:"easy",className:"ml-2 block text-sm text-gray-700",children:"Dễ"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"medium",name:"difficulty",type:"radio",className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300",checked:"medium"===t.difficulty,onChange:()=>s({...t,difficulty:"medium"})}),(0,n.jsx)("label",{htmlFor:"medium",className:"ml-2 block text-sm text-gray-700",children:"Trung b\xecnh"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"hard",name:"difficulty",type:"radio",className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300",checked:"hard"===t.difficulty,onChange:()=>s({...t,difficulty:"hard"})}),(0,n.jsx)("label",{htmlFor:"hard",className:"ml-2 block text-sm text-gray-700",children:"Kh\xf3"})]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"text",id:"tags",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md rounded-r-none",placeholder:"Nhập tag v\xe0 nhấn Enter hoặc Th\xeam",value:r,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j())}}),(0,n.jsx)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-r-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:j,children:"Th\xeam"})]}),t.tags.length>0&&(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:t.tags.map(e=>(0,n.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,n.jsxs)("button",{type:"button",className:"ml-1.5 inline-flex items-center justify-center h-4 w-4 rounded-full text-blue-400 hover:text-blue-500 focus:outline-none focus:text-blue-500",onClick:()=>N(e),children:[(0,n.jsxs)("span",{className:"sr-only",children:["X\xf3a tag ",e]}),(0,n.jsx)("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]},e))}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Th\xeam c\xe1c tag để ph\xe2n loại c\xe2u hỏi (v\xed dụ: Lớp 10, H\xecnh học, Đại số, v.v.)"})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang lưu..."]}):"Lưu c\xe2u hỏi"})})]})]})}},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=1646)}),_N_E=e.O()}]);